on: [push]
jobs:
  json:
    runs-on: ubuntu-latest
    env:
      TAG_VERSION_MATCH_TEST_INPUT: v1.0.0
    steps:
      - uses: actions/checkout@v3
      - run: |
          cat <<EOS > package.json
          {
            "version": "1.0.0"
          }
          EOS
      - id: test
        uses: ./
        with:
          file: ./package.json
          query: .version
      - run: |
          echo ${{ steps.test.outputs.file-version }}

  toml:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - run: |
          cat <<EOS > Cargo.toml
          [package]
          version = "1.0.0"
          EOS
      - id: test
        uses: ./
        with:
          file: ./Cargo.toml
          query: .package.version
      - run: |
          echo ${{ steps.test.outputs.file-version }}
